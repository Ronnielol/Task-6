<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Cinema-3A+Movies+Management+and+Cataloging">Cinema: Movies Management and Cataloging</h1>

<h2 id="label-Description">Description</h2>

<p>With Cinema gem you can:  *  * Manage movie theatre repertoire and periods.
* Import movies from CSV.  * Export collection to YAML or HTML.</p>

<h3 id="label-Create+your+own+movie+collection">Create your own movie collection</h3>

<p>Assume we have small &#39;movie.csv&#39; file:</p>

<pre class="code ruby"><code class="ruby">http://imdb.com/title/tt0111161/?ref_=chttp_tt_1|The Shawshank Redemption|1994|USA|1994-10-14|Crime,Drama|142 min|9.3|Frank Darabont|Tim Robbins,Morgan Freeman,Bob Gunton</code></pre>

<p>Create a movie collection from this file:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_collection'>collection</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Cinema.html" title="Cinema (module)">Cinema</a></span></span><span class='op'>::</span><span class='const'>MovieCollection</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>movie.csv</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='id identifier rubyid_collection'>collection</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span>
<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>=&gt; &lt;Cinema::MovieCollection:0x007fc65e01d548 @movies=[#&lt;Cinema::ModernMovie:0x007fc65d15e4a8 @link=&quot;http://imdb.com/title/tt0111161/?ref_=chttp_tt_1&quot;, @title=&quot;The Shawshank Redemption&quot;, @year=1994, @country=&quot;USA&quot;, @date=#&lt;Date: 1994-10-14 ((2449640j,0s,0n),+0s,2299161j)&gt;, @genre=[&quot;Crime&quot;, &quot;Drama&quot;], @length=&quot;142 min&quot;, @rating=9.3, @director=&quot;Frank Darabont&quot;, @actors=[&quot;Tim Robbins&quot;, &quot;Morgan Freeman&quot;, &quot;Bob Gunton&quot;], @collection=#&lt;Cinema::MovieCollection:0x007fc65e01d548 ...&gt;, @price=#&lt;Money fractional:300 currency:USD&gt;&gt;]&gt;</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Depending on movie year, movie class inside collection will be:</p>

<pre class="code ruby"><code class="ruby">1900..1944 =&gt; AncienMovie
1945..1967 =&gt; ClassicMovie
1968..1999 =&gt; ModernMovie
2000..Date.today.cwyear =&gt; NewMovie
</code></pre>

<h2 id="label-Examples">Examples</h2>

<p>Cinema gem provides both online and offline movie theatre management
models.</p>

<h3 id="label-Movie+collection+for+online+theatres">Movie collection for online theatres</h3>

<p>Create new Netflix collection:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_netflix'>netflix</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Cinema.html" title="Cinema (module)">Cinema</a></span></span><span class='op'>::</span><span class='const'>Examples</span><span class='op'>::</span><span class='const'>Netflix</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>movies.csv</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
</code></pre>

<p>Netflix collection has built-in user balance: <code>ruby
netflix.user_balance =&gt; #&lt;Money fractional:0 currency:USD&gt; </code>
Balance replenishment: <code>ruby netflix.pay 25 =&gt; #&lt;Money
fractional:2500 currency:USD&gt; </code></p>

<p>You can get movie price with &#39;how_much?&#39; method: <code>ruby
netflix.how_much?(&#39;The Kid&#39;) =&gt; #&lt;Money fractional:100
currency:USD&gt; </code></p>

<p>You can filter movies by genre or by country:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_netflix'>netflix</span><span class='period'>.</span><span class='id identifier rubyid_by_genre'>by_genre</span><span class='period'>.</span><span class='id identifier rubyid_crime'>crime</span>
<span class='id identifier rubyid_netflix'>netflix</span><span class='period'>.</span><span class='id identifier rubyid_by_country'>by_country</span><span class='period'>.</span><span class='id identifier rubyid_usa'>usa</span>
</code></pre>

<p>Lets pick random movie to show. Movies with higher rating has higher
priority. User balance will be decreased appropriately. “`ruby
netflix.user_balance =&gt; #&lt;Money fractional:200 currency:USD&gt;</p>

<p>netflix.show(&#39;The Kid&#39;) =&gt; “Now showing: The Terminator.”</p>

<p>netflix.user_balance =&gt; #&lt;Money fractional:100 currency:USD&gt; “`</p>

<p>You can define custom filters: “`ruby netflix.define_filter(:new_sci_fi) {
|movie| !movie.title.include?(&#39;Terminator&#39;) &amp;&amp;
movie.genre.include?(&#39;Action&#39;) &amp;&amp; movie.year &gt; 2003 }</p>

<h1 id="label-Show+results">Show results</h1>

<p>netflix.show(new_sci_fi: true)</p>

<h1 id="label-Custom+filter+with+argument.">Custom filter with argument.</h1>

<p>netflix.define_filter(:new_action) { |movie, year| movie.year &gt; year
&amp;&amp; movie.genre.include?(&#39;Action&#39;) }</p>

<h1 id="label-Show+results">Show results</h1>

<p>netflix.show(new_action: 2003)</p>

<h1 id="label-You+can+also+define+new+filter+by+inheriting+from+an+existing+one.">You can also define new filter by inheriting from an existing one.</h1>

<p>netflix.define_filter(:newest_action, from: :new_action, arg: 2014) “`</p>

<h3 id="label-Movie+theatre+management">Movie theatre management</h3>

<p>Cinema gem provides you a simple DSL for managing repertoire and periods.</p>

<pre class="code ruby"><code class="ruby">
<span class='id identifier rubyid_using'>using</span> <span class='const'>MoneyHelper</span>

<span class='id identifier rubyid_theatre'>theatre</span> <span class='op'>=</span>
  <span class='const'><span class='object_link'><a href="Cinema.html" title="Cinema (module)">Cinema</a></span></span><span class='op'>::</span><span class='const'>Examples</span><span class='op'>::</span><span class='const'>Theatre</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>movies_info.csv</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_hall'>hall</span> <span class='symbol'>:red</span><span class='comma'>,</span> <span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Red</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>places:</span> <span class='int'>100</span>
    <span class='id identifier rubyid_hall'>hall</span> <span class='symbol'>:blue</span><span class='comma'>,</span> <span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Blue</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>places:</span> <span class='int'>50</span>
    <span class='id identifier rubyid_hall'>hall</span> <span class='symbol'>:green</span><span class='comma'>,</span> <span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Green (deluxe)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>places:</span> <span class='int'>12</span>

    <span class='id identifier rubyid_period'>period</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>09:00</span><span class='tstring_end'>&#39;</span></span><span class='op'>..</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:00</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_description'>description</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Comedy morning</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_filters'>filters</span> <span class='label'>genre:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Comedy</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>year:</span> <span class='int'>1900</span><span class='op'>..</span><span class='int'>1980</span>
      <span class='id identifier rubyid_price'>price</span> <span class='int'>10</span>
      <span class='id identifier rubyid_hall'>hall</span> <span class='symbol'>:red</span><span class='comma'>,</span> <span class='symbol'>:blue</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_period'>period</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>11:00</span><span class='tstring_end'>&#39;</span></span><span class='op'>..</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:00</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_description'>description</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Arnold lovers </span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_title'>title</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The Terminator</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_price'>price</span> <span class='int'>50</span>
      <span class='id identifier rubyid_hall'>hall</span> <span class='symbol'>:green</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_period'>period</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>16:00</span><span class='tstring_end'>&#39;</span></span><span class='op'>..</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>20:00</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_description'>description</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Modern action evening</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_filters'>filters</span> <span class='label'>genre:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Action</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Comedy</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>year:</span> <span class='int'>2007</span><span class='op'>..</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span>
      <span class='id identifier rubyid_price'>price</span> <span class='int'>20</span>
      <span class='id identifier rubyid_hall'>hall</span> <span class='symbol'>:red</span><span class='comma'>,</span> <span class='symbol'>:blue</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
</code></pre>

<p>To see movie showtimes call &#39;when?&#39;: <code>ruby
theatre.when?(&#39;The Kid&#39;) =&gt; &quot;The Kid показывают с 6:00 до
11:00&quot; </code></p>

<p>Buy movie ticket: “`ruby theatre.balance =&gt; #&lt;Money fractional:000
currency:USD&gt;</p>

<p>theatre.buy_ticket(&#39;The Kid&#39;) =&gt; “Вы купили билет на The Kid”</p>

<h1 id="label-Theatre+balance+will+be+replenished+appropriately.">Theatre balance will be replenished appropriately.</h1>

<p>theatre.balance =&gt; #&lt;Money fractional:300 currency:USD&gt; “`</p>

<p>To reset theatre balance after encashment use
&#39;take(&#39;Bank&#39;)&#39;: “`ruby theatre.balance =&gt; #&lt;Money
fractional:300 currency:USD&gt;</p>

<p>theatre.take(&#39;Bank&#39;) =&gt; Проведена инкассация.</p>

<p>theatre.balance =&gt; #&lt;Money fractional:000 currency:USD&gt; “`</p>
</div></div>

      <div id="footer">
  Generated on Mon Jul  3 20:29:49 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.3.3).
</div>

    </div>
  </body>
</html>